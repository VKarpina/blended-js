var $=e=>{throw TypeError(e)};var q=(e,t,r)=>t.has(e)||$("Cannot "+r);var a=(e,t,r)=>(q(e,t,"read from private field"),r?r.call(e):t.get(e)),l=(e,t,r)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),E=(e,t,r,s)=>(q(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{a as b,P as I,i as P,b as O}from"./assets/vendor-CWsot2bD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const y of n.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();var f,m,h,g;class K{constructor(){l(this,f,"https://api.unsplash.com/search/photos");l(this,m,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");l(this,h,"");l(this,g,new URLSearchParams({orientation:"portrait",client_id:a(this,m),per_page:12}))}async fetchPopularPhotos(t){const r=`${a(this,f)}?query=popular&page=${t}&${a(this,g)}`;try{const{data:s}=await b(r);return s}catch(s){console.log(s)}}async fetchPhotosByQuery(t){const r=`${a(this,f)}?query=${a(this,h)}&page=${t}&${a(this,g)}`;try{const{data:s}=await b(r);return s}catch(s){console.log(s)}}set query(t){E(this,h,t)}}f=new WeakMap,m=new WeakMap,h=new WeakMap,g=new WeakMap;function d(e,t){let r="";e.forEach(({urls:{full:s,small:o},alt_description:n})=>{r+=`<li class="gallery__item"><a href="${s}"><img class="gallery-img" src="${o}" alt="${n}"></a></li>`}),t.innerHTML=r}const u=new K,c=document.querySelector(".gallery"),v=document.querySelector(".search-form"),w=document.querySelector(".loader"),p=document.getElementById("tui-pagination-container"),i=new I(p,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),_=i.getCurrentPage();u.fetchPopularPhotos(_).then(e=>{console.log(e),i.reset(e.total),d(e.results,c)});i.on("afterMove",B);v.addEventListener("submit",e=>{e.preventDefault();const t=v.elements.query.value.trim();t!==""&&(i.off("afterMove",B),i.off("afterMove",M),c.innerHTML="",u.query=t,S(w),u.fetchPhotosByQuery(_).then(r=>{if(r.results.length===0){P.info({message:"Photos not found, try another query"}),L(p);return}d(r.results,c),i.reset(r.total),r.total<=12?L(p):S(p),P.success({message:`We found ${r.total} photos`})}).catch(r=>{console.log(r),P.error({message:"Something went wrong"})}).finally(()=>{L(w),v.reset()}),i.on("afterMove",M))});c.addEventListener("click",e=>{if(e.preventDefault(),e.target.nodeName!=="IMG")return;O.create(`
        <img src="${e.target.closest("a").href}" alt="${e.target.alt}">
    `).show()});function B(e){const t=e.page;u.fetchPopularPhotos(t).then(r=>{d(r.results,c)})}function M(e){const t=e.page;u.fetchPhotosByQuery(t).then(r=>{d(r.results,c)})}function S(e){e.classList.remove("hidden")}function L(e){e.classList.add("hidden")}
//# sourceMappingURL=index.js.map
