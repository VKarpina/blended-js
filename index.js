var q=e=>{throw TypeError(e)};var $=(e,t,r)=>t.has(e)||q("Cannot "+r);var i=(e,t,r)=>($(e,t,"read from private field"),r?r.call(e):t.get(e)),a=(e,t,r)=>t.has(e)?q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),w=(e,t,r,s)=>($(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{a as E,P as O,i as P}from"./assets/vendor-CX7F-8Kq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();var f,m,h,g;class I{constructor(){a(this,f,"https://api.unsplash.com/search/photos");a(this,m,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");a(this,h,"");a(this,g,new URLSearchParams({orientation:"portrait",client_id:i(this,m),per_page:12}))}async fetchPopularPhotos(t){const r=`${i(this,f)}?query=popular&page=${t}&${i(this,g)}`;try{const{data:s}=await E(r);return s}catch(s){console.log(s)}}async fetchPhotosByQuery(t){const r=`${i(this,f)}?query=${i(this,h)}&page=${t}&${i(this,g)}`;try{const{data:s}=await E(r);return s}catch(s){console.log(s)}}set query(t){w(this,h,t)}}f=new WeakMap,m=new WeakMap,h=new WeakMap,g=new WeakMap;function y(e,t){let r="";e.forEach(({urls:{small:s},alt_description:o})=>{r+=`<li class="gallery__item"><img class="gallery-img" src="${s}" alt="${o}"></li>`}),t.innerHTML=r}const l=new I,u=document.querySelector(".gallery"),v=document.querySelector(".search-form"),M=document.querySelector(".loader"),p=document.getElementById("tui-pagination-container"),c=new O(p,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),B=c.getCurrentPage();l.fetchPopularPhotos(B).then(e=>{console.log(e),c.reset(e.total),y(e.results,u)});c.on("afterMove",_);v.addEventListener("submit",e=>{e.preventDefault();const t=v.elements.query.value.trim();t!==""&&(c.off("afterMove",_),c.off("afterMove",S),u.innerHTML="",l.query=t,b(M),l.fetchPhotosByQuery(B).then(r=>{if(r.results.length===0){P.info({message:"Photos not found, try another query"}),L(p);return}y(r.results,u),c.reset(r.total),r.total<=12?L(p):b(p),P.success({message:`We found ${r.total} photos`})}).catch(r=>{console.log(r),P.error({message:"Something went wrong"})}).finally(()=>{L(M),v.reset()}),c.on("afterMove",S))});function _(e){const t=e.page;l.fetchPopularPhotos(t).then(r=>{y(r.results,u)})}function S(e){const t=e.page;l.fetchPhotosByQuery(t).then(r=>{y(r.results,u)})}function b(e){e.classList.remove("hidden")}function L(e){e.classList.add("hidden")}
//# sourceMappingURL=index.js.map
