{"version":3,"file":"index.js","sources":["../src/js/UnsplashAPI.js","../src/js/renderFunction.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nclass UnsplashAPI {\n\t#BASE_URL = 'https://api.unsplash.com/search/photos';\n\t#API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n\t#query = '';\n\t#params = new URLSearchParams({\n\t\torientation: 'portrait',\n\t\tclient_id: this.#API_KEY,\n\t\tper_page: 12,\n\t});\n\n\tasync fetchPopularPhotos(page) {\n\t\tconst url = `${this.#BASE_URL}?query=popular&page=${page}&${this.#params}`;\n\n\t\ttry {\n\t\t\tconst { data } = await axios(url);\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\tasync fetchPhotosByQuery(page) {\n\t\tconst url = `${this.#BASE_URL}?query=${this.#query}&page=${page}&${this.#params}`;\n\n\t\ttry {\n\t\t\tconst { data } = await axios(url);\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\tset query(newQuery) {\n\t\tthis.#query = newQuery;\n\t}\n}\n\nexport default UnsplashAPI;\n","export default function renderFunction(array, gallery) {\n\tlet HTML = '';\n\tarray.forEach(({ urls: { full, small }, alt_description }) => {\n\t\tHTML += `<li class=\"gallery__item\"><a href=\"${full}\"><img class=\"gallery-img\" src=\"${small}\" alt=\"${alt_description}\"></a></li>`;\n\t});\n\tgallery.innerHTML = HTML;\n}\n","import UnsplashAPI from './UnsplashAPI';\nimport renderFunction from './renderFunction';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst api = new UnsplashAPI();\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\n\nconst container = document.getElementById('tui-pagination-container');\nconst pagination = new Pagination(container, {\n\ttotalItems: 0,\n\titemsPerPage: 12,\n\tvisiblePages: 5,\n\tpage: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\napi.fetchPopularPhotos(page).then(data => {\n\tconsole.log(data);\n\tpagination.reset(data.total);\n\trenderFunction(data.results, gallery);\n});\n\npagination.on('afterMove', getPopular);\n\nform.addEventListener('submit', event => {\n\tevent.preventDefault();\n\tconst value = form.elements.query.value.trim();\n\tif (value === '') {\n\t\treturn;\n\t}\n\tpagination.off('afterMove', getPopular);\n\tpagination.off('afterMove', getByQuery);\n\tgallery.innerHTML = '';\n\tapi.query = value;\n\tshowElement(loader);\n\tapi\n\t\t.fetchPhotosByQuery(page)\n\t\t.then(data => {\n\t\t\tif (data.results.length === 0) {\n\t\t\t\tiziToast.info({ message: 'Photos not found, try another query' });\n\t\t\t\thideElement(container);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trenderFunction(data.results, gallery);\n\t\t\tpagination.reset(data.total);\n\t\t\tif (data.total <= 12) {\n\t\t\t\thideElement(container);\n\t\t\t} else {\n\t\t\t\tshowElement(container);\n\t\t\t}\n\t\t\tiziToast.success({ message: `We found ${data.total} photos` });\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.log(error);\n\t\t\tiziToast.error({ message: 'Something went wrong' });\n\t\t})\n\t\t.finally(() => {\n\t\t\thideElement(loader);\n\t\t\tform.reset();\n\t\t});\n\n\tpagination.on('afterMove', getByQuery);\n});\n\ngallery.addEventListener('click', e => {\n\te.preventDefault();\n\n\tif (e.target.nodeName !== 'IMG') {\n\t\treturn;\n\t}\n\tconst instance = basicLightbox.create(`\n        <img src=\"${e.target.closest('a').href}\" alt=\"${e.target.alt}\">\n    `);\n\n\tinstance.show();\n});\n\nfunction getPopular(event) {\n\tconst currentPage = event.page;\n\tapi.fetchPopularPhotos(currentPage).then(data => {\n\t\trenderFunction(data.results, gallery);\n\t});\n}\n\nfunction getByQuery(event) {\n\tconst currentPage = event.page;\n\tapi.fetchPhotosByQuery(currentPage).then(data => {\n\t\trenderFunction(data.results, gallery);\n\t});\n}\n\nfunction showElement(element) {\n\telement.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n\telement.classList.add('hidden');\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_params","__privateGet","page","url","data","axios","error","newQuery","__privateSet","renderFunction","array","gallery","HTML","full","small","alt_description","api","form","loader","container","pagination","Pagination","getPopular","event","value","getByQuery","showElement","iziToast","hideElement","basicLightbox.create","currentPage","element"],"mappings":"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"}